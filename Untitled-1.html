<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Complete D3 Practice</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body {
    font-family: Arial;
  }

  .bar {
    fill: steelblue;
  }

  .bar:hover {
    fill: orange;
  }

  .label {
    fill: white;
    font-size: 12px;
    text-anchor: middle;
  }

  .tooltip {
    position: absolute;
    background: black;
    color: white;
    padding: 5px;
    border-radius: 4px;
    font-size: 12px;
    pointer-events: none;
    opacity: 0;
  }

  .dot {
    fill: teal;
  }

</style>
</head>
<body>

<h2>Bar Chart + Scatter Plot (Full D3 Practice)</h2>

<div id="tooltip" class="tooltip"></div>

<script>

// =============================
// DATA
// =============================

const barData = [34, 78, 12, 90, 55, 43, 67];

const scatterData = [
  [5, 20],
  [40, 60],
  [25, 40],
  [80, 90],
  [60, 30],
  [90, 70]
];

// =============================
// BAR CHART
// =============================

const width = 500;
const height = 300;
const padding = 40;

const svg = d3.select("body")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

// Scales
const xScale = d3.scaleBand()
  .domain(d3.range(barData.length))
  .range([padding, width - padding])
  .padding(0.1);

const yScale = d3.scaleLinear()
  .domain([0, d3.max(barData)])
  .range([height - padding, padding]);

// Create Bars
svg.selectAll("rect")
  .data(barData)
  .enter()
  .append("rect")
  .attr("class", "bar")
  .attr("x", (d, i) => xScale(i))
  .attr("y", d => yScale(d))
  .attr("width", xScale.bandwidth())
  .attr("height", d => height - padding - yScale(d))
  .on("mouseover", function(event, d) {
    d3.select("#tooltip")
      .style("opacity", 1)
      .html("Value: " + d)
      .style("left", event.pageX + "px")
      .style("top", (event.pageY - 28) + "px");
  })
  .on("mouseout", function() {
    d3.select("#tooltip").style("opacity", 0);
  });

// Add Labels
svg.selectAll("text")
  .data(barData)
  .enter()
  .append("text")
  .attr("class", "label")
  .attr("x", (d, i) => xScale(i) + xScale.bandwidth()/2)
  .attr("y", d => yScale(d) + 15)
  .text(d => d);

// Axes
const xAxis = d3.axisBottom(xScale);
const yAxis = d3.axisLeft(yScale);

svg.append("g")
  .attr("transform", `translate(0, ${height - padding})`)
  .call(xAxis);

svg.append("g")
  .attr("transform", `translate(${padding}, 0)`)
  .call(yAxis);

// =============================
// SCATTER PLOT
// =============================

const scatterWidth = 500;
const scatterHeight = 300;

const scatterSvg = d3.select("body")
  .append("svg")
  .attr("width", scatterWidth)
  .attr("height", scatterHeight);

const xScatter = d3.scaleLinear()
  .domain([d3.min(scatterData, d => d[0]), d3.max(scatterData, d => d[0])])
  .range([padding, scatterWidth - padding]);

const yScatter = d3.scaleLinear()
  .domain([d3.min(scatterData, d => d[1]), d3.max(scatterData, d => d[1])])
  .range([scatterHeight - padding, padding]);

// Create Circles
scatterSvg.selectAll("circle")
  .data(scatterData)
  .enter()
  .append("circle")
  .attr("class", "dot")
  .attr("cx", d => xScatter(d[0]))
  .attr("cy", d => yScatter(d[1]))
  .attr("r", 6);

// Add Labels
scatterSvg.selectAll(".scatter-label")
  .data(scatterData)
  .enter()
  .append("text")
  .attr("x", d => xScatter(d[0]) + 8)
  .attr("y", d => yScatter(d[1]))
  .text(d => `${d[0]},${d[1]}`)
  .attr("font-size", "10px");

// Axes
scatterSvg.append("g")
  .attr("transform", `translate(0, ${scatterHeight - padding})`)
  .call(d3.axisBottom(xScatter));

scatterSvg.append("g")
  .attr("transform", `translate(${padding}, 0)`)
  .call(d3.axisLeft(yScatter));

</script>

</body>
</html>